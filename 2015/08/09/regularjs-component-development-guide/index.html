<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>RegularJS Component Development Guide | Capasky - Waiting</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link href='//fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Titillium+Web' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/8.7/styles/default.min.css">
</head>
<body>
	<div class="g-container m-body">
		<div class="m-header">
    <h1 class="title">
        <a href="/">木一凡</a>
    </h1>
    <h5 class="subtitle">己所不欲，勿施于人。</h5>
</div>
		<div class="m-navbar f-cf">
    <div class="menu-container">
        <ul class="menu-list clearfix">
            <li class="menu-item first"><a href="/">HOME</a></li>
            <li class="menu-item"><a href="/archives">ARCHIVES</a></li>
            <li class="menu-item"><a href="/about.html">ABOUT!ME</a></li>
        </ul>
    </div>
</div>
		<div class="m-main">    			
			<div class="m-post">
	<div class="head">
		<div class="date"><span class="day">09</span>, <span class="month">Aug</span></div>
		<div class="title">
			<a href="/2015/08/09/regularjs-component-development-guide/">RegularJS Component Development Guide</a>
		</div>
	</div>
	<div class="body">
		
			<div class="content">
				<p>这是一篇RegularJS组件的开发规范说明。适用于开发基础组件（通用组件）和应用程序组件（模块组件）。</p>
<p><img class="img" src="/images/regular-ui-logo.png" alt="regular-ui-v5"></p>
<h2 id="1-_概述">1. 概述</h2><p>基础的开发中的命名规范基于<a href="http://rainfore.me/regular-ui/start/rule.html" target="_blank" rel="external">Regular-UI的命名规范</a>，本规范在此基础上进行了扩展。<br>组件开发规范是定义在开发基于RegularJS的应用时，通用组件及模块组件的开发约定。</p>
<h3 id="1-1_通用组件">1.1 通用组件</h3><p>通用组件是对可复用组件的封装，其定义了组件的内部逻辑及事件处理。如<code>ComboBox</code>、<code>TreeView</code>等组件。这些组件通常会作为应用中的基础组件使用，或者作为基组件通过RegularJS中的组件继承机制，实现特定的功能扩展及处理。</p>
<h3 id="1-2_模块组件">1.2 模块组件</h3><p>模块组件通常是应用程序中一个功能模块的封装，基于RegularJS的组件机制封装成模块组件。</p>
<h2 id="2-_组件事件">2. 组件事件</h2><p>组件事件是指在组件内部定义的自定义事件，详细请参考 <a href="http://regularjs.github.io/guide/zh/events/component.html" target="_blank" rel="external">组件事件-RegularJS-Guide</a></p>
<h3 id="2-1_事件命名">2.1 事件命名</h3><p>组件的事件名称使用全部小写，如 dragend, itemselect 等。<br>在以标记方式使用组件时，可以通过以下方式声明事件处理：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">component</span> <span class="attribute">on-dragend</span>=<span class="value">&#123;this._onDragEnd($event)&#125;</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>事件的名称通常以 <strong>对象</strong> + <strong>动作或状态</strong> 的形式构成，如 selectionchange, dragend。<br>如果组件比较小，目标性较为明确，可以仅使用 <strong>动作</strong> 描述，如在Checkbox组件，可以定义 <strong>check</strong> 事件，表示触发了勾选动作。<br>另外，也可以定义根据具体组件逻辑定义具有语义的事件名称，如 noderemoved,<br>可以参考以下的命名示例：</p>
<ol>
<li>dragstart|dragend</li>
<li>sortchange|selectionchange</li>
<li>itemclick|mousedown</li>
<li>check|select|click|resize|close|show|hide</li>
<li></li>
</ol>
<h3 id="2-2_组件模板中事件处理函数">2.2 组件模板中事件处理函数</h3><p>模板中声明的事件（通过 <strong>on-*</strong>）通常会在组件内部进行处理或预处理，<br>例如，在一个Checkbox封装的组件中，可能使用如下的模板：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"u-checkbox"</span> <span class="attribute">on-click</span>=<span class="value">"&#123;this._onClick($event)&#125;"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">i</span> <span class="attribute">r-class</span>=<span class="value">"&#123;&#123;'z-checked': checked&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="title">i</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">span</span>&gt;</span>&#123;label&#125;<span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>Checkbox组件的js实现可能如下所示：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Checkbox = Component.extend(&#123;</span><br><span class="line">	name: <span class="string">'checkbox'</span>,</span><br><span class="line">	config: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.data.checked = <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">this</span>.data.label = <span class="string">''</span>;</span><br><span class="line">		<span class="keyword">this</span>.supr();</span><br><span class="line">	&#125;,</span><br><span class="line">	_onClick: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.data.checked = !<span class="keyword">this</span>.data.checked;</span><br><span class="line">		<span class="keyword">this</span>.$emit(<span class="string">'check'</span>, &#123;</span><br><span class="line">			source: <span class="keyword">this</span>,</span><br><span class="line">			checked: <span class="keyword">this</span>.data.checked</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="2-3_事件参数_EventArgs">2.3 事件参数 EventArgs</h3><p>组件事件的触发使用</p>
<h2 id="3-">3.</h2><h2 id="4-">4.</h2><h2 id="5-">5.</h2><h2 id="6-_RegularJS使用规范">6. RegularJS使用规范</h2><h3 id="6-1_$watch">6.1 $watch</h3><h3 id="6-2_$update">6.2 $update</h3><h3 id="6-3_filter">6.3 filter</h3><h2 id="7-_注释">7. 注释</h2><p>基础注释规范遵循JSDoc3，详情请参见<a href="http://usejsdoc.org/" target="_blank" rel="external">Use JSDoc</a>。</p>
<h3 id="相关链接">相关链接</h3><ul>
<li><a href="http://regularjs.github.io/" target="_blank" rel="external">RegularJS</a></li>
<li><a href="https://github.com/rainfore/regular-ui" target="_blank" rel="external">Regular-UI</a></li>
<li><a href="http://usejsdoc.org/" target="_blank" rel="external">Use JSDoc</a></li>
</ul>

			</div>
		
	</div>
	<div class="m-tags">
		
			
			<span class="u-badge">
				<a href="/tags/guide/">guide</a>
			</span>
			
			<span class="u-badge">
				<a href="/tags/regularjs/">regularjs</a>
			</span>
			
		
	</div>
	<div class="foot">
	    <div class="more"><a href="/2015/08/09/regularjs-component-development-guide/">文章链接</a></div>
		
	    <div class="count"><a href="#notes"></a></div>
		
	    <div class="separate"></div>
	</div>
</div>
		</div>
	</div>
	<div class="g-container">
		<div class="g-foot">
	<div class="m-copyright">Copyright &copy; Capasky 2015</div>
</div>
	</div>
	<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
	<script src="/js/script.js" type="text/javascript"></script>
</body>
</html>